
 /* tipo*/
CREATE TABLE tipo(
   id_tipo number primary key,
   tipo VARCHAR2(100)
);
CREATE SEQUENCE tip_uno START WITH 1 INCREMENT BY 1;

CREATE TRIGGER T_tipo BEFORE INSERT ON tipo
for EACH ROW BEGIN
SELECT tip_uno.NEXTVAL INTO :NEW.id_tipo from DUAL;
END;


INSERT into tipo (tipo) values('Administrador');
INSERT into tipo (tipo) values('Cliente');
/* select * from tipo; */



 /* Tabla de usuario*/
CREATE TABLE usuario(
   id_usuario number primary key,
   nombre VARCHAR2(100),
   apellido VARCHAR2(300),  
   correo VARCHAR2(300),     
   contrasenia VARCHAR2(300),  
   confirmacion VARCHAR2(300),  
   nac DATE,  
   pais VARCHAR2(300), 
   foto VARCHAR2(300),  
   creditos NUMBER,
   fk_tipo NUMBER,
   CONSTRAINT fk_fk_tipo FOREIGN KEY (fk_tipo) REFERENCES tipo (id_tipo)
);
CREATE SEQUENCE usu_uno START WITH 1 INCREMENT BY 1;

CREATE TRIGGER T_usuario BEFORE INSERT ON usuario
for EACH ROW BEGIN
SELECT usu_uno.NEXTVAL INTO :NEW.id_usuario from DUAL;
END;

insert into usuario (nombre,apellido,correo,contrasenia,confirmacion,nac,pais,foto,creditos,fk_tipo) values('sergio','ramirez','sergiounix@gmail.com','1234','Confirmado',TO_DATE('01-03-2019','DD-MM-YYYY'),'Guatemala','https://cdn.computerhoy.com/sites/navi.axelspringer.es/public/styles/1200/public/media/image/2018/08/fotos-perfil-whatsapp_16.jpg?itok=fl2H3Opv',
10000,1);
insert into usuario (nombre,apellido,correo,contrasenia,confirmacion,nac,pais,foto,creditos,fk_tipo) values('madelyn','barraza','madelynunix@gmail.com','1234','Confirmado',TO_DATE('02-04-2019','DD-MM-YYYY'),'Espa単a','https://i.pinimg.com/originals/97/90/1f/97901f198a9c09efd3b095b08fc8d8e2.png',
10000,2);
insert into usuario (nombre,apellido,correo,contrasenia,confirmacion,nac,pais,foto,creditos,fk_tipo) values('alejandro','lorenty','alejandrounix@gmail.com','1234','Confirmado',TO_DATE('03-05-2019','DD-MM-YYYY'),'Panama','https://ep01.epimg.net/elpais/imagenes/2018/12/14/album/1544777592_679099_1544990800_noticia_normal.jpg',
10000,2);
select * from usuario;


 /* tipo*/
CREATE TABLE categoria(
   id_categoria number primary key,
   categoria VARCHAR2(100)
);
CREATE SEQUENCE cat_uno START WITH 1 INCREMENT BY 1;

CREATE TRIGGER T_categoria BEFORE INSERT ON categoria
for EACH ROW BEGIN
SELECT cat_uno.NEXTVAL INTO :NEW.id_categoria from DUAL;
END;

insert into categoria (categoria) values('Zapateria');
insert into categoria (categoria) values('Electrodomesticos');
select * from categoria;

 /* Tabla Producto*/
CREATE TABLE producto(
   id_producto number primary key,
   producto VARCHAR2(100),
   estado VARCHAR2(300),  
   fk_usuario NUMBER,     
   precio NUMBER,  
   detalle VARCHAR2(450),     
   fk_categoria NUMBER,
   CONSTRAINT fk_fk_usuario FOREIGN KEY (fk_usuario) REFERENCES usuario (id_usuario),
   CONSTRAINT fk_fk_categoria FOREIGN KEY (fk_categoria) REFERENCES categoria (id_categoria)
);
CREATE SEQUENCE pro_uno START WITH 1 INCREMENT BY 1;

CREATE TRIGGER T_producto BEFORE INSERT ON producto
for EACH ROW BEGIN
SELECT pro_uno.NEXTVAL INTO :NEW.id_producto from DUAL;
END;

insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Nike','Sin Bloquear',2,'500','producto importado de USA',1);
insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Flexi','Sin Bloquear',2,'1000','Zapatos de Calidad en precio Normal',1);
insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Fila','Sin Bloquear',2,'1500','Zapatos de diferente calidad y diferentes colores',1);
insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Nature','Sin Bloquear',2,'1200','Marca registrada',1);
insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Chanel','Sin Bloquear',2,'1400','Zapato de dama de alta calidad',1);

insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Licuadora Oster','Sin Bloquear',3,'750','Producto en Oferta pensado para el hogar',2);
insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Microondas Mabe','Sin Bloquear',3,'2200','Producto de calidad para cocina',2);
insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Refrigeradora LG','Sin Bloquear',3,'5500','Refrigerador con 10 a単os de garantia para tu cocina',2);
insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Cafetera Samsung','Sin Bloquear',3,'600','Cafetera de lujo dise単ada para tu hogar',2);
insert into producto (producto,estado,fk_usuario,precio,detalle,fk_categoria) values('Lavadora LG','Sin Bloquear',3,'4500','Producto con 10 a単os de garantia para tu hogar',2);
select * from producto;









DROP TRIGGER T_producto; DROP SEQUENCE pro_uno; drop table producto; 
DROP TRIGGER T_categoria; DROP SEQUENCE cat_uno;  drop table categoria;
DROP TRIGGER T_usuario; DROP SEQUENCE usu_uno; drop table usuario; 
DROP TRIGGER T_tipo;DROP SEQUENCE tip_uno; drop table tipo; 


